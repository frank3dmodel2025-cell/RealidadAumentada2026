<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test AR Simple</title>
    
    <!-- Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    
    <style>
        body { margin: 0; height: 100vh; background-color: #f0f0f0; font-family: sans-serif; }
        
        #card {
            margin: 0 auto;
            display: flex; flex-direction: column;
            height: 100%; max-width: 600px;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* El visor debe tener altura definida */
        model-viewer {
            width: 100%;
            height: 80%; /* Ocupa el 80% de la pantalla */
            background-color: #eee;
            --poster-color: #eee;
        }

        .controls {
            height: 20%;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 10px;
        }

        /* Bot√≥n AR personalizado */
        .ar-button {
            background-color: #000; color: white;
            border: none; border-radius: 30px;
            padding: 15px 30px; font-size: 16px; font-weight: bold;
            cursor: pointer;
            display: block;
        }
    </style>
</head>
<body>

    <div id="card">
        <!-- 
            USANDO MODELO ONLINE DE GOOGLE PARA DESCARTAR ERRORES LOCALES 
            src: Astronauta de prueba
        -->
        <model-viewer 
            id="visor"
            src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
            alt="Astronauta Test"
            
            ar
            ar-modes="scene-viewer webxr quick-look"
            ar-placement="floor"
            ar-scale="fixed"
            
            camera-controls
            auto-rotate
            shadow-intensity="1"
        >
            <!-- Bot√≥n AR Nativo (personalizado) -->
            <button slot="ar-button" class="ar-button">
                üëã Activar AR (Tap to Place)
            </button>
        </model-viewer>

        <div class="controls">
            <p><strong>Prueba de Diagn√≥stico</strong></p>
            <p id="status">Cargando modelo...</p>
        </div>
    </div>

    <script>
        const viewer = document.getElementById('visor');
        const status = document.getElementById('status');

        // Verificar si carga
        viewer.addEventListener('load', () => {
            status.innerText = "‚úÖ Modelo cargado (Si no lo ves, rota la c√°mara)";
            status.style.color = "green";
        });

        // Verificar errores
        viewer.addEventListener('error', (e) => {
            console.error(e);
            status.innerHTML = "‚ùå ERROR: No se pudo cargar el modelo.<br>Revisa tu conexi√≥n a internet.";
            status.style.color = "red";
        });
    </script>

</body>
</html>
